(()=>{"use strict";var t,e=new Uint8Array(16);function a(){if(!t&&!(t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return t(e)}const n=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,o=function(t){return"string"==typeof t&&n.test(t)};for(var r=[],s=0;s<256;++s)r.push((s+256).toString(16).substr(1));const d=function(t,e,n){var s=(t=t||{}).random||(t.rng||a)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,e){n=n||0;for(var d=0;d<16;++d)e[n+d]=s[d];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=(r[t[e+0]]+r[t[e+1]]+r[t[e+2]]+r[t[e+3]]+"-"+r[t[e+4]]+r[t[e+5]]+"-"+r[t[e+6]]+r[t[e+7]]+"-"+r[t[e+8]]+r[t[e+9]]+"-"+r[t[e+10]]+r[t[e+11]]+r[t[e+12]]+r[t[e+13]]+r[t[e+14]]+r[t[e+15]]).toLowerCase();if(!o(a))throw TypeError("Stringified UUID is invalid");return a}(s)};class c{constructor(t,e,a){this.name=t,this.date=e,this.priority=a,this.id=d(),this.completed=!1}}class i{constructor(t){this.name=t,this.tasks=[],this.head_id=d(),this.body_id=d()}}(()=>{const t=document.querySelector("#content"),e=document.createElement("input"),a=document.createElement("button"),n=document.createElement("div");n.classList.add("d-flex"),n.appendChild(a),n.appendChild(e),e.classList.add("form-control"),e.placeholder="Enter project name",a.classList.add("btn","btn-primary","my-button"),a.innerText="+",t.appendChild(n),a.addEventListener("click",(()=>{if(""===e.value)alert("Put the project name please");else{const a=new i(e.value);(t=>{let e;e=null===localStorage.getItem("projects")?[]:JSON.parse(localStorage.getItem("projects")),e.push(t),localStorage.setItem("projects",JSON.stringify(e))})(a);const n=JSON.parse(localStorage.getItem("projects")),o=document.createElement("div");o.classList.add("card");const r=d();n.forEach((t=>{o.innerHTML=`\n            <div class='card-title'>\n               <p class='heading'>Project name: ${t.name}</p> \n                <button class='btn btn-success addBtn' data=${a.head_id}>Add task</button>\n                <button class='btn btn-danger deleteProjectBtn' data=${a.body_id}>Delete project</button>\n            </div>\n            <div class='card-body' data=${r}>\n                \n            </div>\n            \n        `})),t.appendChild(o);const s=document.querySelector(`[data='${a.body_id}']`);e.value="",s.addEventListener("click",(t=>{(t=>{const e=JSON.parse(localStorage.getItem("projects"));e.forEach((a=>{if(t.head_id===a.head_id){const t=e.indexOf(a);e.splice(t,1),localStorage.removeItem("projects"),localStorage.setItem("projects",JSON.stringify(e))}}))})(a),t.target.parentElement.parentElement.remove()})),document.querySelector(`[data='${a.head_id}']`).addEventListener("click",(()=>{const t=d(),e=d(),o=d(),s=d(),i=document.querySelector(`[data='${r}']`);i.innerHTML=`\n            <form type='submit'>\n                  \n                <input type='text' placeholder='enter a task' class='form-control taskInput' data=${e}>\n                <input type='date' class='dateInput' data=${s}> \n                <select name='priority' class='priority' data=${o}>\n                    <option value='low'>Low</option>\n                    <option value='high'>High</option>\n                </select> \n            <button type ='submit' class='btn btn-secondary submitForm' data=${t}>Submit</button>\n            </form> \n            `;const l=document.querySelector(`[data='${t}']`),u=document.querySelector(`[data='${e}']`),p=document.querySelector(`[data='${o}']`),m=document.querySelector(`[data='${s}']`);l.addEventListener("click",(t=>{if(t.preventDefault(),""===u.value||""===m.value)alert("Please fill in all fields");else{const t=new c(u.value,m.value,p.value);n.forEach((e=>{if(e.head_id===a.head_id){((t,e)=>{const a=JSON.parse(localStorage.getItem("projects"));a.forEach((n=>{e.head_id===n.head_id&&(n.tasks.push(t),localStorage.removeItem("projects"),localStorage.setItem("projects",JSON.stringify(a)))}))})(t,a),((t,e,a,n)=>{t.style.display="none",e.style.display="none",a.style.display="none",n.style.display="none"})(u,m,p,l);const e=JSON.parse(localStorage.getItem("projects")),n=d();e.forEach((e=>{e.head_id===a.head_id&&(e.tasks.forEach((t=>{i.innerHTML+=`\n                                    <div class='card-item' data=${n}>${t.name} | Due date: ${t.date} | priority: ${t.priority}<button class='btn btn-danger deleteBtn' data=${t.id}>Delete</button></div>\n                                `})),document.querySelectorAll(".deleteBtn").forEach((e=>{e.addEventListener("click",(e=>{const n=a.tasks.indexOf(t);a.tasks.splice(n,1),e.target.parentElement.remove()}))})))}))}}))}}))}))}}))})()})();